apply plugin: 'com.android.application'

android {
	compileSdkVersion manifest.global.android.compile_sdk_version

	defaultConfig {
		applicationId "$manifest.global.android.group_id.$manifest.global.demo_app.application_id"
		minSdkVersion manifest.global.android.min_sdk_version
		targetSdkVersion manifest.global.android.target_sdk_version
		versionCode 2
		versionName '1.1'
		testInstrumentationRunner 'androidx.test.runner.AndroidJUnitRunner'
		signingConfigs {
			release {
				storeType 'pkcs12'
				storeFile file(rootDir.getCanonicalPath() + '/gomobile-ipfs.pfx')
				keyAlias 'gomobile-ipfs'
				storePassword System.getenv('ANDROID_KEYPASS')
				keyPassword System.getenv('ANDROID_KEYPASS')
			}
		}
	}

	buildTypes {
		release {
			minifyEnabled false
			proguardFiles getDefaultProguardFile('proguard-android-optimize.txt'), 'proguard-rules.pro'
			signingConfig signingConfigs.release
		}
	}

	lintOptions {
		htmlReport false
		abortOnError true
	}

	android.applicationVariants.all { variant ->
		variant.outputs.all {
			outputFileName = "ipfs_${buildType.name}.apk"
		}
	}

}

dependencies {
    implementation fileTree(dir: 'libs', include: ['*.jar'])
	implementation 'com.google.zxing:core:3.4.1'
	implementation 'com.journeyapps:zxing-android-embedded:4.2.0'
    implementation 'androidx.appcompat:appcompat:1.3.0'
    implementation 'androidx.constraintlayout:constraintlayout:1.1.3'
    testImplementation 'junit:junit:4.12'
    androidTestImplementation 'androidx.test.ext:junit:1.1.2'
    androidTestImplementation 'androidx.test.espresso:espresso-core:3.3.0'
    implementation project(':bridge')
}
